<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jacozinho do Senhor</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --cor-primaria: #5D4037; --cor-secundaria: #8D6E63;
            --cor-fundo: #EFEBE9; --cor-texto: #3E2723;
            --cor-branco: #FFFFFF; --cor-sucesso: #2E7D32; --cor-aviso: #FBC02D;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Roboto', sans-serif; background-color: var(--cor-fundo); color: var(--cor-texto); display: flex; justify-content: center; min-height: 100vh; padding-bottom: 80px;}
        .app-container { background: var(--cor-branco); width: 100%; max-width: 900px; box-shadow: 0 4px 20px rgba(93,64,55,0.15); min-height: 100vh; display: flex; flex-direction: column; }
        
        header { background: white; padding: 15px; text-align: center; border-bottom: 4px solid var(--cor-primaria); }
        .logo-img { max-width: 150px; display: block; margin: 0 auto 5px auto; }
        
        .abas { display: flex; background: #D7CCC8; }
        .aba { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-weight: bold; color: #5D4037; border-bottom: 3px solid transparent; }
        .aba.ativa { background: white; border-bottom: 3px solid var(--cor-primaria); color: var(--cor-primaria); }
        
        main { padding: 20px; flex-grow: 1; }
        .view-section { display: none; }
        .view-section.ativa { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }

        label { font-size: 0.8rem; color: var(--cor-secundaria); font-weight: 700; margin-bottom: 5px; display: block; text-transform: uppercase; margin-top: 15px;}
        input, select { width: 100%; padding: 10px; border: 2px solid #D7CCC8; border-radius: 8px; font-size: 0.95rem; margin-bottom: 5px; background: #fff;}
        .btn-salvar { width: 100%; padding: 15px; background-color: var(--cor-primaria); color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; margin-top: 20px; font-size: 1rem; }
        .btn-mini { padding: 6px 12px; font-size: 0.8rem; background: #D7CCC8; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; }
        
        /* --- CALEND√ÅRIO --- */
        #areaCalendarioPDF { 
            background-color: #ffffff !important; /* FOR√áA FUNDO BRANCO NO PDF */
            padding: 10px; 
            color: #000; 
            width: 100%; 
        }

        /* Logo invis√≠vel que s√≥ aparece no PDF */
        .logo-pdf { display: none; text-align: center; margin-bottom: 10px; }
        .logo-pdf img { height: 60px; }

        .calendario-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; background: var(--cor-primaria); color: white; padding: 10px; border-radius: 6px 6px 0 0; }
        
        .grid-dias { 
            display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; 
            text-align: center; font-weight: bold; margin-bottom: 0; 
            color: var(--cor-branco); background: var(--cor-secundaria); padding: 5px 0; font-size: 0.8rem;
        }
        
        .grid-calendario { 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            grid-auto-rows: 95px; /* Altura ideal para A4 */
            gap: 1px; 
            background: #D7CCC8; 
            border: 2px solid var(--cor-secundaria); 
        }
        
        .dia-cal { 
            background: #FFF; padding: 2px; cursor: pointer; position: relative; 
            font-size: 0.8rem; display: flex; flex-direction: column; overflow: hidden; 
        }
        .dia-cal:hover { background: #FAFAFA; overflow-y: auto; }
        .dia-cal.hoje { background: #E0F2F1; }
        .dia-numero { font-weight: bold; display: block; margin-bottom: 2px; padding-left: 4px; color: var(--cor-primaria); font-size: 0.9rem;}
        
        .evento-chip { 
            font-size: 0.65rem; background: var(--cor-primaria); color: white; 
            padding: 2px 4px; border-radius: 3px; margin-bottom: 1px; 
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; display: block;
            line-height: 1.2;
        }
        .pendente { background: var(--cor-aviso) !important; color: #3E2723 !important; }

        /* Barra flutuante */
        #barraSalvar {
            display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: #3E2723; color: white; padding: 15px 30px; border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 1000; align-items: center; gap: 15px;
        }

        .area-modal { display: none; background: #FFF8E1; padding: 15px; border: 2px dashed var(--cor-secundaria); border-radius: 10px; margin-bottom: 20px; }
        .checklist-container { border: 2px solid #D7CCC8; border-radius: 8px; max-height: 250px; overflow-y: auto; padding: 10px; background: #FAFAFA; }
        .checklist-item { display: flex; align-items: center; padding: 8px; border-bottom: 1px solid #eee; }
        .checklist-item input { margin-right: 10px; width: 18px; height: 18px; accent-color: var(--cor-primaria); }
        .card-escala { background: #F5F5F5; border-radius: 8px; padding: 10px; margin-bottom: 8px; display: flex; justify-content: space-between; border-left: 5px solid var(--cor-primaria); }
        .btn-acao { border: none; background: none; font-size: 1.2rem; cursor: pointer; }
        .esconder-na-foto { display: inline-block; }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <img src="logo.png" class="logo-img">
            <div class="abas">
                <div class="aba ativa" onclick="mudarAba('tab-escala', this)">üìã ESCALAS</div>
                <div class="aba" onclick="mudarAba('tab-calendario', this)">üìÖ CALEND√ÅRIO</div>
            </div>
        </header>

        <main>
            <div id="tab-escala" class="view-section ativa">
                <div style="display:flex; gap:10px; margin-bottom:15px">
                    <button onclick="toggleArea('areaCadastro')" class="btn-mini" style="flex:1">‚ûï Novo Servo</button>
                    <button onclick="toggleArea('areaGerenciar'); carregarParaGerenciar()" class="btn-mini" style="flex:1">‚öôÔ∏è Gerenciar</button>
                </div>

                <div id="areaCadastro" class="area-modal">
                    <h3>Novo Cadastro</h3>
                    <input type="text" id="novoNome" placeholder="Nome">
                    <select id="novoMinisterio"><option value="M√∫sica">M√∫sica</option><option value="Acolhida">Acolhida</option><option value="Prega√ß√£o">Prega√ß√£o</option><option value="Intercess√£o">Intercess√£o</option><option value="Outros">Outros</option></select>
                    <button onclick="salvarNovoServo()" class="btn-mini">Salvar</button>
                </div>
                <div id="areaGerenciar" class="area-modal">
                    <h3>Gerenciar</h3>
                    <input type="text" id="buscaGerencia" placeholder="Buscar..." onkeyup="filtrarGerencia()">
                    <div id="listaGerencia" style="max-height:150px;overflow-y:auto"></div>
                </div>

                <form id="formEscala">
                    <label>Respons√°vel:</label> <input type="text" id="inputResponsavel" required>
                    <label>Data:</label> <input type="date" id="dataEscala" required onchange="carregarEscalaDoDia()">
                    <label>Minist√©rio:</label> 
                    <select id="selectMinisterio" required onchange="filtrarListaPorMinisterio()">
                        <option value="">Selecione...</option>
                        <option value="Geral">Todos</option>
                        <option value="M√∫sica">M√∫sica</option>
                        <option value="Comunica√ß√£o">Comunica√ß√£o</option>
                        <option value="Acolhida">Acolhida</option>
                        <option value="Prega√ß√£o">Prega√ß√£o</option>
                        <option value="Intercess√£o">Intercess√£o</option>
                        <option value="Crian√ßas">Crian√ßas</option>
                        <option value="Coordena√ß√£o">Coordena√ß√£o</option>
                        <option value="Promo√ß√£o Humana">Promo√ß√£o Humana</option>
                        <option value="Jovem">Jovem</option>
                        <option value="Forma√ß√£o">Forma√ß√£o</option>
                        <option value="Fam√≠lias">Fam√≠lias</option>
                    </select>
                    <div class="checklist-container" id="containerChecklist"><p style="text-align:center;color:#999;padding:10px">Selecione fun√ß√£o...</p></div>
                    <div style="margin-top:5px"><button type="button" class="btn-mini" onclick="marcarTodos(true)">Todos</button> <button type="button" class="btn-mini" onclick="marcarTodos(false)">Nenhum</button></div>
                    <button type="submit" class="btn-salvar">Salvar Escala</button>
                </form>
                <div id="areaParaImagem" style="background:white;padding:10px;margin-top:20px;border:1px solid #eee;border-radius:8px">
                    <h3 style="text-align:center;color:#5D4037;border-bottom:2px solid #5D4037;margin-bottom:10px">ESCALA DO DIA <span id="dataTitulo">--/--</span></h3>
                    <div id="listaEscalados"></div>
                </div>
                <button onclick="gerarImagem()" class="btn-salvar" style="background:var(--cor-sucesso);margin-top:10px">üì∏ Baixar Escala</button>
            </div>

            <div id="tab-calendario" class="view-section">
                
                <div id="areaCalendarioPDF">
                    <div class="logo-pdf" id="logoPdfHeader">
                        <img src="logo.png" alt="Logo">
                    </div>

                    <div class="calendario-header">
                        <button class="btn-mini esconder-na-foto" onclick="mudarMes(-1)">‚óÄ</button>
                        <h2 id="mesAnoDisplay" style="margin:0; text-transform:uppercase; letter-spacing:1px; font-size:1.2rem">M√™s / Ano</h2>
                        <button class="btn-mini esconder-na-foto" onclick="mudarMes(1)">‚ñ∂</button>
                    </div>

                    <div class="grid-dias">
                        <div>DOM</div><div>SEG</div><div>TER</div><div>QUA</div><div>QUI</div><div>SEX</div><div>S√ÅB</div>
                    </div>
                    <div id="calendarioGrid" class="grid-calendario"></div>
                </div>
                
                <button onclick="gerarPDFCalendario()" class="btn-salvar" style="background:#D32F2F; margin-top:10px">üìÑ Baixar Calend√°rio (PDF A4)</button>

                <div id="modalEvento" class="area-modal" style="margin-top:20px">
                    <h3>Novo Compromisso</h3>
                    <div style="display:flex; gap:10px;">
                        <div style="flex:1"><label>In√≠cio:</label><input type="date" id="evDataInicio" readonly style="background:#EEE"></div>
                        <div style="flex:1"><label>Final (Opcional):</label><input type="date" id="evDataFim"></div>
                    </div>
                    
                    <label>T√≠tulo:</label>
                    <input type="text" id="evTitulo" list="sugestoesTitulos" placeholder="Digite ou selecione...">
                    <datalist id="sugestoesTitulos">
                        <option value="SANTA MISSA"><option value="REUNI√ÉO"><option value="RETIRO"><option value="FORMA√á√ÉO"><option value="GRUPO DE ORA√á√ÉO"><option value="ADORA√á√ÉO"><option value="VIG√çLIA">
                    </datalist>
                    
                    <label>Minist√©rio:</label>
                    <select id="evMinisterio">
                        <option value="Geral">Geral (Todos)</option>
                        <option value="M√∫sica">M√∫sica</option>
                        <option value="Comunica√ß√£o">Comunica√ß√£o</option>
                        <option value="Acolhida">Acolhida</option>
                        <option value="Prega√ß√£o">Prega√ß√£o</option>
                        <option value="Intercess√£o">Intercess√£o</option>
                        <option value="Crian√ßas">Crian√ßas</option>
                        <option value="Coordena√ß√£o">Coordena√ß√£o</option>
                        <option value="Promo√ß√£o Humana">Promo√ß√£o Humana</option>
                        <option value="Jovem">Jovem</option>
                        <option value="Forma√ß√£o">Forma√ß√£o</option>
                        <option value="Fam√≠lias">Fam√≠lias</option>
                    </select>

                    <div style="display:flex;gap:10px;margin-top:15px">
                        <button onclick="fecharModalEvento()" class="btn-mini" style="background:#999;flex:1">Cancelar</button>
                        <button onclick="adicionarAFila()" class="btn-mini" style="background:var(--cor-aviso);color:#3E2723;flex:1">‚ûï Adicionar √† Lista</button>
                    </div>
                </div>
                
                <div id="listaEventosDia" style="margin-top:20px"></div>
            </div>
        </main>
        
        <div id="barraSalvar">
            <span id="txtPendentes">0 altera√ß√µes pendentes</span>
            <button onclick="processarFila()" class="btn-mini" style="background:#4CAF50; color:white; font-size:1rem; padding:8px 15px">üíæ SALVAR TUDO</button>
        </div>
    </div>

    <script>
        let todosServos = [];
        let eventosMes = [];
        let filaPendentes = []; 
        let dataCalendario = new Date();

        function mudarAba(id, el) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('ativa'));
            document.getElementById(id).classList.add('ativa');
            document.querySelectorAll('.aba').forEach(a => a.classList.remove('ativa'));
            el.classList.add('ativa');
            if(id==='tab-calendario') carregarEventosDoMes();
        }
        function toggleArea(id) { const el=document.getElementById(id); el.style.display=el.style.display==='block'?'none':'block'; }

        async function carregarEventosDoMes() {
            try {
                const res = await fetch('/eventos');
                eventosMes = await res.json();
                renderizarCalendario();
            } catch(e) {}
        }

        function renderizarCalendario() {
            const grid = document.getElementById('calendarioGrid');
            grid.innerHTML = "";
            const ano = dataCalendario.getFullYear();
            const mes = dataCalendario.getMonth();
            const meses = ["JANEIRO","FEVEREIRO","MAR√áO","ABRIL","MAIO","JUNHO","JULHO","AGOSTO","SETEMBRO","OUTUBRO","NOVEMBRO","DEZEMBRO"];
            document.getElementById('mesAnoDisplay').innerText = `${meses[mes]} ${ano}`;

            const primeiroDia = new Date(ano, mes, 1).getDay();
            const ultimoDia = new Date(ano, mes + 1, 0).getDate();

            for(let i=0; i<primeiroDia; i++) grid.innerHTML += `<div style="background:#EEE"></div>`;

            const hoje = new Date().toISOString().split('T')[0];
            
            for(let dia=1; dia<=ultimoDia; dia++) {
                const dataFmt = `${ano}-${String(mes+1).padStart(2,'0')}-${String(dia).padStart(2,'0')}`;
                
                const salvos = eventosMes.filter(e => e.data === dataFmt);
                const pendentes = filaPendentes.filter(e => e.data === dataFmt);
                
                let html = "";
                salvos.forEach(ev => html += `<div class="evento-chip">${ev.titulo}</div>`);
                pendentes.forEach(ev => html += `<div class="evento-chip pendente">‚è≥ ${ev.titulo}</div>`);

                const cls = dataFmt === hoje ? 'dia-cal hoje' : 'dia-cal';
                const div = document.createElement('div');
                div.className = cls;
                div.innerHTML = `<span class="dia-numero">${dia}</span>${html}`;
                div.onclick = () => abrirModalEvento(dataFmt);
                grid.appendChild(div);
            }
        }

        function mudarMes(d) { dataCalendario.setMonth(dataCalendario.getMonth()+d); carregarEventosDoMes(); }

        // --- GERAR PDF COM CORRE√á√ÉO DE BRANCO ---
        function gerarPDFCalendario() {
            const elemento = document.getElementById('areaCalendarioPDF');
            const logo = document.getElementById('logoPdfHeader');
            const botoes = document.querySelectorAll('.esconder-na-foto');

            // 1. Mostra Logo / Esconde bot√µes
            logo.style.display = 'block';
            botoes.forEach(b => b.style.display = 'none');

            // 2. Configura√ß√µes
            const opt = {
                margin:       5,
                filename:     `Calendario_${document.getElementById('mesAnoDisplay').innerText}.pdf`,
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2, useCORS: true, scrollY: 0 }, 
                jsPDF:        { unit: 'mm', format: 'a4', orientation: 'landscape' }
            };

            // 3. Pequeno delay para garantir que o navegador "desenhou" a logo antes de tirar a foto
            setTimeout(() => {
                html2pdf().set(opt).from(elemento).save()
                .then(() => {
                    // S√ì RESTAURA DEPOIS QUE ACABAR
                    logo.style.display = 'none';
                    botoes.forEach(b => b.style.display = 'inline-block');
                })
                .catch(err => {
                    alert("Erro ao gerar PDF.");
                    logo.style.display = 'none';
                    botoes.forEach(b => b.style.display = 'inline-block');
                });
            }, 200); // Espera 0.2 segundos
        }

        // --- FILA DE EVENTOS ---
        function abrirModalEvento(d) {
            document.getElementById('modalEvento').style.display='block';
            document.getElementById('evDataInicio').value = d;
            document.getElementById('evDataFim').value = "";
            document.getElementById('evTitulo').value = "";
            
            const div = document.getElementById('listaEventosDia');
            div.innerHTML = "<h4>Neste dia:</h4>";
            
            const salvos = eventosMes.filter(e => e.data === d);
            salvos.forEach(ev => div.innerHTML += `<div style="padding:5px;border-bottom:1px solid #ddd;display:flex;justify-content:space-between"><span>${ev.titulo}</span><button onclick="apagarEvento(${ev.id})" style="color:red;border:none;cursor:pointer">üóëÔ∏è</button></div>`);
            
            const pends = filaPendentes.filter(e => e.data === d);
            pends.forEach((ev, idx) => div.innerHTML += `<div style="padding:5px;background:#FFF9C4;display:flex;justify-content:space-between"><span>‚è≥ ${ev.titulo}</span><small>Pendente</small></div>`);
        }
        function fecharModalEvento() { document.getElementById('modalEvento').style.display='none'; }

        function adicionarAFila() {
            const tit = document.getElementById('evTitulo').value;
            const ini = document.getElementById('evDataInicio').value;
            const fim = document.getElementById('evDataFim').value;
            const min = document.getElementById('evMinisterio').value;
            if(!tit) return alert("Digite o t√≠tulo!");

            let tituloFinal = tit;
            if(min !== 'Geral') tituloFinal = `${tit} - ${min}`;

            let atual = new Date(ini); atual.setMinutes(atual.getMinutes()+atual.getTimezoneOffset());
            let limite = fim ? new Date(fim) : new Date(ini); limite.setMinutes(limite.getMinutes()+limite.getTimezoneOffset());

            if(limite < atual) return alert("Data final menor que in√≠cio");

            while(atual <= limite) {
                filaPendentes.push({ titulo: tituloFinal, data: atual.toISOString().split('T')[0], ministerio: min });
                atual.setDate(atual.getDate()+1);
            }
            fecharModalEvento(); renderizarCalendario(); atualizarBarraSalvar();
        }

        function atualizarBarraSalvar() {
            const barra = document.getElementById('barraSalvar');
            const txt = document.getElementById('txtPendentes');
            if(filaPendentes.length > 0) {
                barra.style.display = 'flex';
                txt.innerText = `${filaPendentes.length} altera√ß√µes pendentes`;
            } else {
                barra.style.display = 'none';
            }
        }

        async function processarFila() {
            if(filaPendentes.length === 0) return;
            const senha = prompt(`Salvar ${filaPendentes.length} eventos?\nüîí Digite a Senha:`);
            if(!senha) return;

            let erros = 0;
            for(const ev of filaPendentes) {
                const res = await fetch('/eventos', { method: 'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ ...ev, senha }) });
                if(!res.ok) erros++;
            }
            if(erros > 0) alert(`Aten√ß√£o: ${erros} eventos falharam.`); else alert("‚úÖ Tudo Salvo!");
            filaPendentes = []; atualizarBarraSalvar(); carregarEventosDoMes();
        }

        async function apagarEvento(id) {
            if(!confirm("Apagar?")) return;
            const senha = prompt("üîí Senha:"); if(!senha) return;
            const r = await fetch(`/eventos/${id}`, {method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({senha})});
            if(r.ok) { const d=document.getElementById('evDataInicio').value; carregarEventosDoMes(); setTimeout(()=>abrirModalEvento(d),500); }
            else alert("Erro");
        }

        // --- GERAIS ---
        async function carregarDadosIniciais(){try{const r=await fetch('/servos');todosServos=await r.json();}catch(e){}}
        async function salvarNovoServo(){const n=document.getElementById('novoNome').value;const m=document.getElementById('novoMinisterio').value;if(!n)return;await fetch('/servos',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({nome:n,ministerio:m})});alert("Salvo!");toggleArea('areaCadastro');carregarDadosIniciais();}
        function filtrarListaPorMinisterio(){const m=document.getElementById('selectMinisterio').value;const c=document.getElementById('containerChecklist');c.innerHTML="";if(!m)return;const l=todosServos.filter(s=>m==="Geral"?true:s.ministerio&&s.ministerio.includes(m));if(l.length===0)c.innerHTML="<p style='text-align:center'>Vazio</p>";l.forEach(s=>{c.innerHTML+=`<div class="checklist-item"><label style='display:flex;width:100%'><input type='checkbox' value='${s.id}' class='chk-servo'><span style='flex:1'>${s.nome}</span><small>(${s.ministerio})</small></label></div>`})}
        function marcarTodos(b){document.querySelectorAll('.chk-servo').forEach(c=>c.checked=b)}
        document.getElementById('formEscala').onsubmit=async(e)=>{e.preventDefault();const i=Array.from(document.querySelectorAll('.chk-servo:checked')).map(c=>c.value);if(i.length===0)return alert("Selecione algu√©m!");const s=prompt("üîí Senha:");if(!s)return;const r=await fetch('/escalar-multiplo',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({servo_ids:i,data:document.getElementById('dataEscala').value,ministerio_nome:document.getElementById('selectMinisterio').value,responsavel:document.getElementById('inputResponsavel').value,senha:s})});const j=await r.json();alert(r.ok?j.mensagem:j.erro);if(r.ok){carregarEscalaDoDia();marcarTodos(false);}}
        async function carregarEscalaDoDia(){const d=document.getElementById('dataEscala').value;if(!d)return;document.getElementById('dataTitulo').innerText=d.split('-').reverse().join('/');const div=document.getElementById('listaEscalados');div.innerHTML="Carregando...";const r=await fetch(`/escalas/${d}`);const l=await r.json();div.innerHTML="";l.forEach(i=>{div.innerHTML+=`<div class='card-escala'><div><b>${i.servos?.nome}</b><br><small>${i.ministerio_nome}</small></div><button class='btn-acao' onclick='delEscala(${i.id})'>‚ùå</button></div>`})}
        async function delEscala(id){const s=prompt("Senha:");if(!s)return;const r=await fetch(`/escalas/${id}`,{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({senha:s})});if(r.ok)carregarEscalaDoDia();else alert("Erro");}
        function gerarImagem(){const a=document.getElementById('areaParaImagem');document.querySelectorAll('.btn-acao').forEach(b=>b.style.display='none');html2canvas(a).then(c=>{const l=document.createElement('a');l.download='escala.jpg';l.href=c.toDataURL();l.click();document.querySelectorAll('.btn-acao').forEach(b=>b.style.display='block');})}
        function carregarParaGerenciar(){const d=document.getElementById('listaGerencia');d.innerHTML="";todosServos.forEach(s=>d.innerHTML+=`<div style='display:flex;justify-content:space-between;padding:5px;border-bottom:1px solid #eee'><span>${s.nome}</span><button onclick="editarServo(${s.id},'${s.nome}','${s.ministerio}')">‚úèÔ∏è</button></div>`)}
        async function editarServo(id,n,m){const nn=prompt("Nome:",n);const nm=prompt("Min:",m);const s=prompt("Senha:");if(nn&&nm&&s)await fetch(`/servos/${id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({nome:nn,ministerio:nm,senha:s})});carregarDadosIniciais();}

        window.onload = () => { carregarDadosIniciais(); };
    </script>
</body>
</html>